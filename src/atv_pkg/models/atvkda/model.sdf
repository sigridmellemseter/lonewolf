<?xml version="1.0" ?>
<sdf version="1.6">
	<model name="atvkda">
		<pose>0 0 0.35 0 -0 0</pose>
		<link name="rigid_body">
			<self_collide>false</self_collide>
			<pose frame="">-0.5509772858698141 -0.35921503762573787 0.4691281110478071 0.0 -0.0 0.0</pose>
			<inertial>
				<pose frame="">0.0 0.0 0.0 0 0 0</pose>
				<mass>320</mass>
				<inertia>
					<ixx>1885.8715450981506</ixx>
					<ixy>-788.8659932657681</ixy>
					<ixz>1054.1788863708364</ixz>
					<iyy>4090.969858369452</iyy>
					<iyz>672.3583823903066</iyz>
					<izz>4008.555494215648</izz>
				</inertia>
			</inertial>
			<collision name="rigid_body_collision">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_body.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
			</collision>
			<visual name="rigid_body_visual">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_body.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
			</visual>
		</link>
		<link name="rigid_left_front_wheel">
			<self_collide>false</self_collide>
			<pose frame="">0.149313570651654 0.10837677345109908 -0.0027835333140371534 0.0 -0.0 0.0</pose>
			<inertial>
				<pose frame="">0.0 0.0 0.0 0 0 0</pose>
				<mass>10</mass>
				<inertia>
					<ixx>15.143590881522137</ixx>
					<ixy>-4.802538758666648</ixy>
					<ixz>0.12333363363217081</ixz>
					<iyy>26.521764239610228</iyy>
					<iyz>0.08953771605692044</iyz>
					<izz>21.757922353753656</izz>
				</inertia>
			</inertial>
			<collision name="rigid_left_front_wheel_collision">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_left_front_wheel.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
				<surface>
					<friction>
						<ode>
							<mu>1</mu>
							<mu2>1</mu2>
							<slip1>0</slip1>
							<slip2>0</slip2>
						</ode>
					</friction>
					<contact>
						<ode>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+13</kp>
							<kd>1</kd>
							<max_vel>0.01</max_vel>
							<min_depth>0.01</min_depth>
						</ode>
					</contact>
				</surface>
			</collision>
			<visual name="rigid_left_front_wheel_visual">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_left_front_wheel.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
			</visual>
		</link>
		<link name="rigid_right_front_wheels">
			<self_collide>false</self_collide>
			<pose frame="">0.14931385014328322 -0.7921332073751959 -0.0027817838858620993 0.0 -0.0 0.0</pose>
			<inertial>
				<pose frame="">0.0 0.0 0.0 0 0 0</pose>
				<mass>10</mass>
				<inertia>
					<ixx>197.87077943866038</ixx>
					<ixy>35.10051570917194</ixy>
					<ixz>0.12332250487162914</ixz>
					<iyy>26.52024193662049</iyy>
					<iyz>-0.6539456907207306</iyz>
					<izz>204.48474143510109</izz>
				</inertia>
			</inertial>
			<collision name="rigid_right_front_wheels_collision">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_right_front_wheels.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
				<surface>
					<friction>
						<ode>
							<mu>1</mu>
							<mu2>1</mu2>
							<slip1>0</slip1>
							<slip2>0</slip2>
						</ode>
					</friction>
					<contact>
						<ode>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+13</kp>
							<kd>1</kd>
							<max_vel>0.01</max_vel>
							<min_depth>0.01</min_depth>
						</ode>
					</contact>
				</surface>
			</collision>
			<visual name="rigid_right_front_wheels_visual">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_right_front_wheels.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
			</visual>
		</link>
		<link name="rigid_left_back_wheel">
			<self_collide>false</self_collide>
			<pose frame="">-1.3496864291871955 0.10837677345106926 -0.0033596523819218326 0.0 -0.0 0.0</pose>
			<inertial>
				<pose frame="">0.0 0.0 0.0 0 0 0</pose>
				<mass>10</mass>
				<inertia>
					<ixx>15.144641248094105</ixx>
					<ixy>43.41142623761963</ixy>
					<ixz>-1.34575725690412</ixz>
					<iyy>560.5370054792465</iyy>
					<iyz>0.1080680593351053</iyz>
					<izz>555.7721132268188</izz>
				</inertia>
			</inertial>
			<collision name="rigid_left_back_wheel_collision">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_left_back_wheel.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
				<surface>
					<friction>
						<ode>
							<mu>1</mu>
							<mu2>1</mu2>
							<slip1>0</slip1>
							<slip2>0</slip2>
						</ode>
					</friction>
					<contact>
						<ode>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+13</kp>
							<kd>1</kd>
							<max_vel>0.01</max_vel>
							<min_depth>0.01</min_depth>
						</ode>
					</contact>
				</surface>
			</collision>
			<visual name="rigid_left_back_wheel_visual">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_left_back_wheel.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
			</visual>
		</link>
		<link name="rigid_right_back_wheel">
			<self_collide>false</self_collide>
			<pose frame="">-1.3496861498881583 -0.792133207375183 -0.003357902953795265 0.0 -0.0 0.0</pose>
			<inertial>
				<pose frame="">0.0 0.0 0.0 0 0 0</pose>
				<mass>10</mass>
				<inertia>
					<ixx>197.87182915903855</ixx>
					<ixy>-317.2825380058341</ixy>
					<ixz>-1.3449230007096538</ixz>
					<iyy>560.5108437180864</iyy>
					<iyz>-0.7893790439387832</iyz>
					<izz>738.4742934961762</izz>
				</inertia>
			</inertial>
			<collision name="rigid_right_back_wheel_collision">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_right_back_wheel.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
				<surface>
					<friction>
						<ode>
							<mu>1</mu>
							<mu2>1</mu2>
							<slip1>0</slip1>
							<slip2>0</slip2>
						</ode>
					</friction>
					<contact>
						<ode>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+13</kp>
							<kd>1</kd>
							<max_vel>0.01</max_vel>
							<min_depth>0.01</min_depth>
						</ode>
					</contact>
				</surface>
			</collision>
			<visual name="rigid_right_back_wheel_visual">
				<geometry>
					<mesh>
						<uri>model://atvkda/meshes/CAD/rigid_right_back_wheel.stl</uri>
						<scale>0.001 0.001 0.001</scale>
					</mesh>
				</geometry>
			</visual>
		</link>


						<!-- ****************************** LIDAR *****************************    -->
		<link name='base_footprint'>
			<pose frame=''>0 0 0 0 0 0</pose>
			<inertial>
				<pose frame=''>0.215 -0.47 0.8 0 0 0</pose>
				<mass>2</mass>
				<inertia>
					<ixx>3.23643</ixx>
					<ixy>0.0156863</ixy>
					<ixz>0.065702</ixz>
					<iyy>3.35996</iyy>
					<iyz>-0.00821275</iyz>
					<izz>3.32745</izz>
				</inertia>
			</inertial>
			<collision name='base_footprint_collision_1'>
				<pose frame=''>0.215 -0.47 0.79815 0 0 0</pose>
				<geometry>
					<cylinder>
						<length>0.0717</length>
						<radius>0.0516</radius>
					</cylinder>
				</geometry>
				<surface>
					<contact>
					<ode/>
					</contact>
					<friction>
					<ode/>
					<torsional>
						<ode/>
					</torsional>
					</friction>
					<bounce/>
				</surface>
				<max_contacts>10</max_contacts>
			</collision>
			<visual name='base_footprint_visual_1'>
				<pose frame=''>0.215 -0.47 0.7623 0 0 0</pose>
				<geometry>
					<mesh>
					<scale>1 1 1</scale>
					<uri>model://velodyne_VLP16/meshes/VLP16_base_1.dae</uri>
					</mesh>
				</geometry>
				<material>
					<script>
					<uri>__default__</uri>
					<name>__default__</name>
					</script>
				</material>
			</visual>
			<visual name='base_footprint_visual_2'>
				<pose frame=''>0.215 -0.47 0.7623 0 0 0</pose>
				<geometry>
					<mesh>
						<scale>1 1 1</scale>
						<uri>model://velodyne_VLP16/meshes/VLP16_base_2.dae</uri>
					</mesh>
				</geometry>
				<material>
					<script>
						<uri>__default__</uri>
						<name>__default__</name>
					</script>
				</material>
			</visual>
			<visual name='base_footprint_visual_3'>
				<pose frame=''>0.215 -0.47 0.7623 0 0 0</pose>
				<geometry>
					<mesh>
						<scale>1 1 1</scale>
						<uri>model://velodyne_VLP16/meshes/VLP16_scan.dae</uri>
					</mesh>
				</geometry>
				<material>
					<script>
						<uri>__default__</uri>
						<name>__default__</name>
					</script>
				</material>
			</visual>
			<sensor name='velodyne-VLP16' type='ray'>
				<visualize>0</visualize>
				<update_rate>10</update_rate>
				<ray>
					<scan>
						<horizontal>
							<samples>1875</samples>
							<resolution>1</resolution>
							<min_angle>-3.14159</min_angle>
							<max_angle>3.14159</max_angle>
						</horizontal>
						<vertical>
							<samples>16</samples>
							<resolution>1</resolution>
							<min_angle>-0.261799</min_angle>
							<max_angle>0.261799</max_angle>
						</vertical>
					</scan>
					<range>
						<min>0.055</min>
						<max>140</max>
						<resolution>0.001</resolution>
					</range>
					<noise>
						<type>gaussian</type>
						<mean>0</mean>
						<stddev>0</stddev>
					</noise>
				</ray>
				<plugin name='gazebo_ros_laser_controller' filename='libgazebo_ros_velodyne_laser.so'>
					<topicName>/velodyne_points</topicName>
					<frameName>/velodyne</frameName>
					<min_range>0.9</min_range>
					<max_range>130.0</max_range>
					<gaussianNoise>0.008</gaussianNoise>
					<robotNamespace>/</robotNamespace>
					
					<output_type>sensor_msgs/PointCloud</output_type> 
				</plugin>
				<pose frame=''>0.215 -0.47 0.8 0 0 0</pose>
			</sensor>
			<gravity>0</gravity>
			<self_collide>0</self_collide>
			<kinematic>0</kinematic>
		</link>
	<!-- ****************************** LIDAR END *****************************    -->

	<!-- ****************************** Joints **********************************   -->

		<joint name="lidar_joint" type="fixed">
    			<parent>rigid_body</parent>
    			<child>base_footprint</child>
    			<pose>>0.215 -0.47 0.8 0 0 0</pose>
  		</joint>

		<joint name="rev_right_back_wheel" type="revolute">
			<parent>rigid_body</parent>
			<child>rigid_right_back_wheel</child>
			<pose frame="">0 0 0 0 0 0</pose>
			<axis>
				<xyz>0 1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
			</axis>
		</joint>
		<joint name="rev_left_back_wheel" type="revolute">
			<parent>rigid_body</parent>
			<child>rigid_left_back_wheel</child>
			<pose frame="">0 0 0 0 0 0</pose>
			<axis>
				<xyz>0 1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
			</axis>
		</joint>
		<joint name="rev_left_front_wheel" type="revolute">
			<parent>rigid_body</parent>
			<child>rigid_left_front_wheel</child>
			<pose frame="">0 0 0 0 0 0</pose>
			<axis>
				<xyz>0 -1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
			</axis>
		</joint>
		<joint name="rev_right_front_wheel" type="revolute">
			<parent>rigid_body</parent>
			<child>rigid_right_front_wheels</child>
			<pose frame="">0 0 0 0 0 0</pose>
			<axis>
				<xyz>0 -1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
			</axis>
		</joint>

	<!-- ****************************** Joints end**********************************   -->
	

		<!-- Controls the differential drive robot -->	  
		<plugin name='diff_drive' filename='libgazebo_ros_diff_drive.so'>
			<ros>
				<namespace> /demo </namespace>
				<remapping>cmd_vel:=cmd_vel</remapping>
				<remapping>odom:=odom</remapping>
			</ros>

			<!-- Wheels -->
			<num_wheel_pairs> 1 </num_wheel_pairs>
			<odometry_frame> odom </odometry_frame>

			<left_joint>rev_left_back_wheel</left_joint>
			<!--<left_joint>rev_left_front_wheel</left_joint>
			<wheel_separation>0.917913</wheel_separation>
			<wheel_diameter>0.66</wheel_diameter> -->

			<right_joint>rev_right_back_wheel</right_joint>
			<!--<right_joint>rev_right_front_wheel</right_joint> -->
			<wheel_separation>0.914</wheel_separation>
			<wheel_diameter>0.694622</wheel_diameter>

		 	<!-- limits -->
		 	<max_wheel_torque>20</max_wheel_torque>
		 	<max_wheel_acceleration>10.0</max_wheel_acceleration>	
			
					 <!-- output -->
			<publish_odom>true</publish_odom>
			<publish_odom_tf>true</publish_odom_tf>
			<publish_wheel_tf>true</publish_wheel_tf>
			<update_rate>100.0</update_rate>

			<odometry_frame>odom</odometry_frame>
			<robot_base_frame>rigid_body</robot_base_frame>	
		</plugin>
	</model>
</sdf>
